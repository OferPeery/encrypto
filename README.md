# Enigma

**:closed_lock_with_key: Secure and authenticate your files**
This project is consisted of 2 programs:
(1) Encryptor - encrypts hybridly your file and signs it digitally.
(2) Decryptor - verifies the authenticity of the file's digital signature, and if verified decrypts the file.  
**:technologist: Architecture**
The programs follow the Java Crypto Architecture - and they're _algorithm and provider independent_.  
For each cryptographic operation you can specify in the appropriate `.properties` file the desired algorith, provider and more specification of your choice, such as mode/padding/key-length/IV-length etc...

## Prerequisites

- You need [Java/JDK]() installed to run the application locally, and to generate a `KeyStore` to save a `key pair` of your own, by using `Key Tool`

## Installation

### Part A - Generate Your Keys and Digital Certificate

You may use the existing `KeyStore`s and `key pair`s in this project as an example **or** generate ones of your own by using `keytool` in your terminal:

1. Generate a `key pair` for an asymetric encryption algorithm of your choice and store it in a `KeyStore`.
   After hitting `enter`, grant a strong password to each of them, and fill the interactive form in your terminal.

   ```
   keytool -genkeypair -alias <KeyPairAlias> -keyalg <AsymetricAlgName> -keystore "<KeyStorePathName>.<KeystoreType>"
   ```

   Example:

   > keytool -genkeypair -alias keyPairOfer -keyalg RSA -keystore "./Resources/keystoreOfer.pkcs12"

2. Export from the `KeyStore` your `Digital Certificate` (generated by the `public key` of your `key pair`)

   ```
   keytool -exportcert -alias <KeyPairAlias> -file "<SenderCertificatePathName>.cer" -keystore "<KeyStorePathName>.<KeystoreType>"
   ```

   Example:

   > keytool -exportcert -alias keyPairOfer -file "./Resources/certificateOfer.cer" -keystore "./keystoreOfer.pkcs12"

3. Send your `Digital Certificate` to whom you want to send the file.  
   (With it, the receiver will be able to validate the sender's digital signature)

4. Ask the reciever for his/her `Digital Certificate`.  
   (With its embeded `public key` you will be able to encrypt hybridly the file, such that only the reciever will be able to decrypt it).

5. Import the receiver's `Digital Certificate` to your own `KeyStore`:

   ```
   keytool -importcert -alias <ReceiverCertificateAlias> -file "<ReceiverCertificatePathName>.cer" -keystore "<KeyStorePathName>.<KeystoreType>"
   ```

   Example:

   > keytool -importcert -alias certificateChen -file "./certificateChen.cer" -keystore "./keystoreOfer.pkcs12"

### Part B - Adapt the User-Input and Configuration Files to Your Needs

- The `Encryptor` program uses 2 `.properties` files which you may edit: `user input` and `config` files.  
  You may use the existing files as an example, found in paths:
  - `/Resources/encruptorUserInput.properties`.
  - `/Resources/encryptorConfig.properties`.
- The `Decryptor` program uses only 1 `.properties` file which you may edit: `user input`.  
   You may use the existing file as an example, found in path:
  - `/Resources/decryptorUserInput.properties`.

More details about the properties can be found in the full documentation in: `/Documentation.docx`.

### Part C - Install the Programs:

Run the following commands in your terminal:

- _Encryptor_:

  ```
  javac EncryptorUserInput.java EncryptorLogic.java EncryptorProgram.java
  jar -cfm EncryptorProgram.jar manifestEncryptor.txt EncryptorUserInput.class EncryptorLogic.class EncryptorProgram.class
  ```

- _Decryptor_:

  ```
  javac DecryptorUserInput.java DecryptorLogic.java DecryptorProgram.java
  jar -cfm DecryptorProgram.jar .txt DecryptorUserInput.class DecryptorLogic.class DecryptorProgram.class
  ```

## Run

- _Encryptor_:
  Run the following command with your own parameters in the terminal:

  ```
  java -jar EncryptorProgram.jar <SenderKeyStorePassword> <SenderPrivateKeyPassword> <EncryptorUserInputFilePath>.properties
  ```

  You can use the existing example:

  ```
  java -jar EncryptorProgram.jar Se@3536dm Se@3536dm ./Resources/encryptorUserInput.properties
  ```

- Send / Receive the Encryptor's 2 output files. In default, their names are:
  - `ciphertext.txt`
  - `decryptorConfig.properties`
- _Decryptor_:
  Run the following command with your own parameters in the terminal:

  ```
  java -jar DecryptorProgram.jar <ReceiverKeyStorePassword> <ReceiverPrivateKeyPassword> <DecryptorUserInputFilePath>.properties
  ```

  You can use the existing example:

  ```
  java -jar DecryptorProgram.jar Ce@1998cg Ce@1998cg ./Resources/decryptorUserInput.properties
  ```

## Documentation and more about this project

- Can be found in file: `/Documentation.docx`.

## Authors

- Ofer Peery - peryofer7@gmail.com
- Chen Gabbay - chenos1998@gmail.com

## License

This application was developed as part of course "Building Secure Applications" in Reichman University.  
This project is licensed under the MIT License (see the `LICENSE` file for more details).
